import{p as Q,m as re,k as Ie,l as we,q as Z,c as V,v as ee,h as n,x as K,y as J,M as Pe,I as le,E as ae,z as ke,A as Re,B as Se,C as Fe,D as Be,F as $e,G as Te,H as Le,r as B,J as De,K as Oe,L as Ae,w as Ee,N as We,O as Ne,P as Me,Q as O,R as G,S as Ue,T as qe,U as je,W as Ke,X as ze,Y as He,Z as Xe,n as de,_ as Ye,s as Ge,d as F,e as Je,f as L,V as Qe,$ as ce,i as f,a0 as D,a1 as fe,u as E,a2 as ve,t as me,j}from"./index-42d80fc2.js";import{u as Ze}from"./list-69e389da.js";import{V as X,a as et}from"./VRow-89bd8ebb.js";import{V as tt,m as nt,u as _e,a as lt,b as at,c as he,d as ge}from"./VInput-e7eb76b1.js";class ie{constructor(s){let{x:a,y:i,width:t,height:l}=s;this.x=a,this.y=i,this.width=t,this.height=l}get top(){return this.y}get bottom(){return this.y+this.height}get left(){return this.x}get right(){return this.x+this.width}}function it(e){const s=e.getBoundingClientRect(),a=getComputedStyle(e),i=a.transform;if(i){let t,l,r,c,v;if(i.startsWith("matrix3d("))t=i.slice(9,-1).split(/, /),l=+t[0],r=+t[5],c=+t[12],v=+t[13];else if(i.startsWith("matrix("))t=i.slice(7,-1).split(/, /),l=+t[0],r=+t[3],c=+t[4],v=+t[5];else return new ie(s);const m=a.transformOrigin,g=s.x-c-(1-l)*parseFloat(m),h=s.y-v-(1-r)*parseFloat(m.slice(m.indexOf(" ")+1)),p=l?s.width/l:e.offsetWidth+1,_=r?s.height/r:e.offsetHeight+1;return new ie({x:g,y:h,width:p,height:_})}else return new ie(s)}function ot(e,s,a){if(typeof e.animate>"u")return{finished:Promise.resolve()};let i;try{i=e.animate(s,a)}catch{return{finished:Promise.resolve()}}return typeof i.finished>"u"&&(i.finished=new Promise(t=>{i.onfinish=()=>{t(i)}})),i}const st="cubic-bezier(0.4, 0, 0.2, 1)";const rt=Q({active:Boolean,max:[Number,String],value:{type:[Number,String],default:0},...re(),...Ie({transition:{component:we}})},"VCounter"),ut=Z()({name:"VCounter",functional:!0,props:rt(),setup(e,s){let{slots:a}=s;const i=V(()=>e.max?`${e.value} / ${e.max}`:String(e.value));return ee(()=>n(Pe,{transition:e.transition},{default:()=>[K(n("div",{class:["v-counter",e.class],style:e.style},[a.default?a.default({counter:i.value,max:e.max,value:e.value}):i.value]),[[J,e.active]])]})),{}}});const dt=Q({floating:Boolean,...re()},"VFieldLabel"),Y=Z()({name:"VFieldLabel",props:dt(),setup(e,s){let{slots:a}=s;return ee(()=>n(tt,{class:["v-field-label",{"v-field-label--floating":e.floating},e.class],style:e.style,"aria-hidden":e.floating||void 0},a)),{}}}),ct=["underlined","outlined","filled","solo","solo-inverted","solo-filled","plain"],xe=Q({appendInnerIcon:le,bgColor:String,clearable:Boolean,clearIcon:{type:le,default:"$clear"},active:Boolean,centerAffix:{type:Boolean,default:void 0},color:String,baseColor:String,dirty:Boolean,disabled:{type:Boolean,default:null},error:Boolean,flat:Boolean,label:String,persistentClear:Boolean,prependInnerIcon:le,reverse:Boolean,singleLine:Boolean,variant:{type:String,default:"filled",validator:e=>ct.includes(e)},"onClick:clear":ae(),"onClick:appendInner":ae(),"onClick:prependInner":ae(),...re(),...ke(),...Re(),...Se()},"VField"),be=Z()({name:"VField",inheritAttrs:!1,props:{id:String,...nt(),...xe()},emits:{"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,s){let{attrs:a,emit:i,slots:t}=s;const{themeClasses:l}=Fe(e),{loaderClasses:r}=Be(e),{focusClasses:c,isFocused:v,focus:m,blur:g}=_e(e),{InputIcon:h}=lt(e),{roundedClasses:p}=$e(e),{rtlClasses:_}=Te(),x=V(()=>e.dirty||e.active),u=V(()=>!e.singleLine&&!!(e.label||t.label)),$=Le(),o=V(()=>e.id||`input-${$}`),A=V(()=>`${o.value}-messages`),I=B(),W=B(),z=B(),d=V(()=>["plain","underlined"].includes(e.variant)),{backgroundColorClasses:w,backgroundColorStyles:P}=De(Oe(e,"bgColor")),{textColorClasses:k,textColorStyles:te}=Ae(V(()=>e.error||e.disabled?void 0:x.value&&v.value?e.color:e.baseColor));Ee(x,b=>{if(u.value){const y=I.value.$el,R=W.value.$el;requestAnimationFrame(()=>{const S=it(y),C=R.getBoundingClientRect(),M=C.x-S.x,U=C.y-S.y-(S.height/2-C.height/2),T=C.width/.75,q=Math.abs(T-S.width)>1?{maxWidth:We(T)}:void 0,H=getComputedStyle(y),ue=getComputedStyle(R),Ce=parseFloat(H.transitionDuration)*1e3||150,Ve=parseFloat(ue.getPropertyValue("--v-field-label-scale")),pe=ue.getPropertyValue("color");y.style.visibility="visible",R.style.visibility="hidden",ot(y,{transform:`translate(${M}px, ${U}px) scale(${Ve})`,color:pe,...q},{duration:Ce,easing:st,direction:b?"normal":"reverse"}).finished.then(()=>{y.style.removeProperty("visibility"),R.style.removeProperty("visibility")})})}},{flush:"post"});const N=V(()=>({isActive:x,isFocused:v,controlRef:z,blur:g,focus:m}));function ne(b){b.target!==document.activeElement&&b.preventDefault()}return ee(()=>{var M,U,T;const b=e.variant==="outlined",y=t["prepend-inner"]||e.prependInnerIcon,R=!!(e.clearable||t.clear),S=!!(t["append-inner"]||e.appendInnerIcon||R),C=()=>t.label?t.label({...N.value,label:e.label,props:{for:o.value}}):e.label;return n("div",G({class:["v-field",{"v-field--active":x.value,"v-field--appended":S,"v-field--center-affix":e.centerAffix??!d.value,"v-field--disabled":e.disabled,"v-field--dirty":e.dirty,"v-field--error":e.error,"v-field--flat":e.flat,"v-field--has-background":!!e.bgColor,"v-field--persistent-clear":e.persistentClear,"v-field--prepended":y,"v-field--reverse":e.reverse,"v-field--single-line":e.singleLine,"v-field--no-label":!C(),[`v-field--variant-${e.variant}`]:!0},l.value,w.value,c.value,r.value,p.value,_.value,e.class],style:[P.value,e.style],onClick:ne},a),[n("div",{class:"v-field__overlay"},null),n(Ne,{name:"v-field",active:!!e.loading,color:e.error?"error":typeof e.loading=="string"?e.loading:e.color},{default:t.loader}),y&&n("div",{key:"prepend",class:"v-field__prepend-inner"},[e.prependInnerIcon&&n(h,{key:"prepend-icon",name:"prependInner"},null),(M=t["prepend-inner"])==null?void 0:M.call(t,N.value)]),n("div",{class:"v-field__field","data-no-activator":""},[["filled","solo","solo-inverted","solo-filled"].includes(e.variant)&&u.value&&n(Y,{key:"floating-label",ref:W,class:[k.value],floating:!0,for:o.value,style:te.value},{default:()=>[C()]}),n(Y,{ref:I,for:o.value},{default:()=>[C()]}),(U=t.default)==null?void 0:U.call(t,{...N.value,props:{id:o.value,class:"v-field__input","aria-describedby":A.value},focus:m,blur:g})]),R&&n(Me,{key:"clear"},{default:()=>[K(n("div",{class:"v-field__clearable",onMousedown:q=>{q.preventDefault(),q.stopPropagation()}},[t.clear?t.clear():n(h,{name:"clear"},null)]),[[J,e.dirty]])]}),S&&n("div",{key:"append",class:"v-field__append-inner"},[(T=t["append-inner"])==null?void 0:T.call(t,N.value),e.appendInnerIcon&&n(h,{key:"append-icon",name:"appendInner"},null)]),n("div",{class:["v-field__outline",k.value],style:te.value},[b&&n(O,null,[n("div",{class:"v-field__outline__start"},null),u.value&&n("div",{class:"v-field__outline__notch"},[n(Y,{ref:W,floating:!0,for:o.value},{default:()=>[C()]})]),n("div",{class:"v-field__outline__end"},null)]),d.value&&u.value&&n(Y,{ref:W,floating:!0,for:o.value},{default:()=>[C()]})])])}),{controlRef:z}}});function ft(e){const s=Object.keys(be.props).filter(a=>!Ue(a)&&a!=="class"&&a!=="style");return qe(e,s)}const oe=Symbol("Forwarded refs");function se(e,s){let a=e;for(;a;){const i=Reflect.getOwnPropertyDescriptor(a,s);if(i)return i;a=Object.getPrototypeOf(a)}}function vt(e){for(var s=arguments.length,a=new Array(s>1?s-1:0),i=1;i<s;i++)a[i-1]=arguments[i];return e[oe]=a,new Proxy(e,{get(t,l){if(Reflect.has(t,l))return Reflect.get(t,l);if(!(typeof l=="symbol"||l.startsWith("$")||l.startsWith("__"))){for(const r of a)if(r.value&&Reflect.has(r.value,l)){const c=Reflect.get(r.value,l);return typeof c=="function"?c.bind(r.value):c}}},has(t,l){if(Reflect.has(t,l))return!0;if(typeof l=="symbol"||l.startsWith("$")||l.startsWith("__"))return!1;for(const r of a)if(r.value&&Reflect.has(r.value,l))return!0;return!1},set(t,l,r){if(Reflect.has(t,l))return Reflect.set(t,l,r);if(typeof l=="symbol"||l.startsWith("$")||l.startsWith("__"))return!1;for(const c of a)if(c.value&&Reflect.has(c.value,l))return Reflect.set(c.value,l,r);return!1},getOwnPropertyDescriptor(t,l){var c;const r=Reflect.getOwnPropertyDescriptor(t,l);if(r)return r;if(!(typeof l=="symbol"||l.startsWith("$")||l.startsWith("__"))){for(const v of a){if(!v.value)continue;const m=se(v.value,l)??("_"in v.value?se((c=v.value._)==null?void 0:c.setupState,l):void 0);if(m)return m}for(const v of a){const m=v.value&&v.value[oe];if(!m)continue;const g=m.slice();for(;g.length;){const h=g.shift(),p=se(h.value,l);if(p)return p;const _=h.value&&h.value[oe];_&&g.push(..._)}}}}})}const mt=["color","file","time","date","datetime-local","week","month"],ht=Q({autofocus:Boolean,counter:[Boolean,Number,String],counterValue:[Number,Function],prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,suffix:String,role:String,type:{type:String,default:"text"},modelModifiers:Object,...at(),...xe()},"VTextField"),ye=Z()({name:"VTextField",directives:{Intersect:je},inheritAttrs:!1,props:ht(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,s){let{attrs:a,emit:i,slots:t}=s;const l=Ke(e,"modelValue"),{isFocused:r,focus:c,blur:v}=_e(e),m=V(()=>typeof e.counterValue=="function"?e.counterValue(l.value):typeof e.counterValue=="number"?e.counterValue:(l.value??"").toString().length),g=V(()=>{if(a.maxlength)return a.maxlength;if(!(!e.counter||typeof e.counter!="number"&&typeof e.counter!="string"))return e.counter}),h=V(()=>["plain","underlined"].includes(e.variant));function p(d,w){var P,k;!e.autofocus||!d||(k=(P=w[0].target)==null?void 0:P.focus)==null||k.call(P)}const _=B(),x=B(),u=B(),$=V(()=>mt.includes(e.type)||e.persistentPlaceholder||r.value||e.active);function o(){var d;u.value!==document.activeElement&&((d=u.value)==null||d.focus()),r.value||c()}function A(d){i("mousedown:control",d),d.target!==u.value&&(o(),d.preventDefault())}function I(d){o(),i("click:control",d)}function W(d){d.stopPropagation(),o(),de(()=>{l.value=null,Ye(e["onClick:clear"],d)})}function z(d){var P;const w=d.target;if(l.value=w.value,(P=e.modelModifiers)!=null&&P.trim&&["text","search","password","tel","url"].includes(e.type)){const k=[w.selectionStart,w.selectionEnd];de(()=>{w.selectionStart=k[0],w.selectionEnd=k[1]})}}return ee(()=>{const d=!!(t.counter||e.counter!==!1&&e.counter!=null),w=!!(d||t.details),[P,k]=ze(a),{modelValue:te,...N}=he.filterProps(e),ne=ft(e);return n(he,G({ref:_,modelValue:l.value,"onUpdate:modelValue":b=>l.value=b,class:["v-text-field",{"v-text-field--prefixed":e.prefix,"v-text-field--suffixed":e.suffix,"v-input--plain-underlined":h.value},e.class],style:e.style},P,N,{centerAffix:!h.value,focused:r.value}),{...t,default:b=>{let{id:y,isDisabled:R,isDirty:S,isReadonly:C,isValid:M}=b;return n(be,G({ref:x,onMousedown:A,onClick:I,"onClick:clear":W,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"],role:e.role},ne,{id:y.value,active:$.value||S.value,dirty:S.value||e.dirty,disabled:R.value,focused:r.value,error:M.value===!1}),{...t,default:U=>{let{props:{class:T,...q}}=U;const H=K(n("input",G({ref:u,value:l.value,onInput:z,autofocus:e.autofocus,readonly:C.value,disabled:R.value,name:e.name,placeholder:e.placeholder,size:1,type:e.type,onFocus:o,onBlur:v},q,k),null),[[He("intersect"),{handler:p},null,{once:!0}]]);return n(O,null,[e.prefix&&n("span",{class:"v-text-field__prefix"},[n("span",{class:"v-text-field__prefix__text"},[e.prefix])]),t.default?n("div",{class:T,"data-no-activator":""},[t.default(),H]):Xe(H,{class:T}),e.suffix&&n("span",{class:"v-text-field__suffix"},[n("span",{class:"v-text-field__suffix__text"},[e.suffix])])])}})},details:w?b=>{var y;return n(O,null,[(y=t.details)==null?void 0:y.call(t,b),d&&n(O,null,[n("span",null,null),n(ut,{active:e.persistentCounter||r.value,value:m.value,max:g.value},t.counter)])])}:void 0})}),vt({},_,x,u)}}),gt=f("h1",{class:"text-center"},"事項",-1),yt=f("thead",null,[f("tr",null,[f("th",null,"名稱"),f("th",null,"操作")])],-1),_t={key:0},xt=f("td",{colspan:"2"},"沒有事項",-1),bt=[xt],Ct=f("h1",{class:"text-center"},"已完成事項",-1),Vt=f("thead",null,[f("tr",null,[f("th",null,"名稱"),f("th",null,"操作")])],-1),pt={key:0},It=f("td",{colspan:"2"},"沒有已完成的事項",-1),wt=[It],Ft={__name:"ListView",setup(e){const s=Ze(),{items:a,finishedItems:i}=Ge(s),{addItem:t,editItem:l,delItem:r,cancelEditItem:c,confirmEditItem:v}=s,m=B(""),g=B(null),h=B([]),p=async()=>{const u=await g.value.validate();console.log(u),!(u.length>0)&&(t(m.value),g.value.reset())},_=async(u,$)=>{(await h.value[$].validate()).length>0||v(u)},x={required:u=>!!u||"欄位必填",length:u=>u.length>=3||"必須三個字以上"};return(u,$)=>(F(),Je(Qe,null,{default:L(()=>[n(et,null,{default:L(()=>[n(X,{cols:"12"},{default:L(()=>[gt]),_:1}),n(X,{cols:"12"},{default:L(()=>[n(ye,{variant:"solo-filled",label:"新增事項",modelValue:m.value,"onUpdate:modelValue":$[0]||($[0]=o=>m.value=o),rules:[x.required,x.length],"append-icon":"mdi-plus",ref_key:"newItemInput",ref:g,"onClick:append":p,onKeydown:ce(p,["enter"])},null,8,["modelValue","rules"]),n(ge,null,{default:L(()=>[yt,f("tbody",null,[(F(!0),D(O,null,fe(E(a),(o,A)=>(F(),D("tr",{key:o.id},[f("td",null,[K(f("span",null,me(o.name),513),[[J,!o.edit]]),K(n(ye,{modelValue:o.model,"onUpdate:modelValue":I=>o.model=I,rules:[x.required,x.length],ref_for:!0,ref_key:"editItemInput",ref:h,onKeydown:ce(I=>_(o.id,A),["enter"]),autofocus:""},null,8,["modelValue","onUpdate:modelValue","rules","onKeydown"]),[[J,o.edit]])]),f("td",null,[o.edit?(F(),D(O,{key:1},[n(j,{icon:"mdi-check",variant:"text",color:"green",onClick:I=>_(o.id,A)},null,8,["onClick"]),n(j,{icon:"mdi-undo",variant:"text",color:"red",onClick:I=>E(c)(o.id)},null,8,["onClick"])],64)):(F(),D(O,{key:0},[n(j,{icon:"mdi-pencil",variant:"text",color:"green",onClick:I=>E(l)(o.id)},null,8,["onClick"]),n(j,{icon:"mdi-delete",variant:"text",color:"red",onClick:I=>E(r)(o.id)},null,8,["onClick"])],64))])]))),128)),E(a).length===0?(F(),D("tr",_t,bt)):ve("",!0)])]),_:1})]),_:1}),n(X,{cols:"12"},{default:L(()=>[Ct]),_:1}),n(X,{cols:"12"},{default:L(()=>[n(ge,null,{default:L(()=>[Vt,f("tbody",null,[(F(!0),D(O,null,fe(E(i),o=>(F(),D("tr",{key:o.id},[f("td",null,me(o.name),1),f("td",null,[n(j,{icon:"mdi-delete",variant:"text",color:"red",onClick:A=>u.delFinishedItem(o.id)},null,8,["onClick"])])]))),128)),E(i).length===0?(F(),D("tr",pt,wt)):ve("",!0)])]),_:1})]),_:1})]),_:1})]),_:1}))}};export{Ft as default};
